<!DOCTYPE html>
<html class="t-{{ site.themeColor }}">
{% include head.html %}

<body>
    {% include navigation.html %}

    <article>
        <header class="app-page-header" style="background: {{ page.background }} !important;">
            <div class="u-container">
                <img class="app-icon" src="/assets/img/apps/{{ page.folder }}/icon.png"></img>
                <h1>{{ page.title }}</h1>
                <h3>{{ page.subtitle }}</h3>
                <a href="{{ post.appstore_url }}" target="_blank"><img class="app-store" src="{{ " /assets/img/app-store-black-on-color.png " | prepend: site.baseurl }}"></img>
                </a>
            </div>
        </header>

        <div class="c-article__main">
            <div class="screenshot-container">
                <div id="carousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        {% for img in page.screenshots %}
                          {% if forloop.first %}
                          <div class="carousel-item active">
                              <img src="/assets/img/iPhoneBlank.png" class="framed-screenshot" style="background-image:url({{ img }}), url(/assets/img/iPhone6White.png);">
                          </div>
                          {% else %}
                          <div class="carousel-item">
                              <img src="/assets/img/iPhoneBlank.png" class="framed-screenshot" style="background-image:url({{ img }}), url(/assets/img/iPhone6White.png);">
                          </div>
                          {% endif %}
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="content-container">
                {{ content }}
            </div>
            <div class="clearfix"></div>
        </div>
    </article>

    {% include footer.html %}
    {% include analytics.html %}
    
    <script src="/assets/js/jquery-slim.min.js"></script>
    <script src="/assets/js/util.js"></script>
    <script src="/assets/js/carousel.js"></script>

    <script>
        // Should throw an error because carousel is in transition
        function testCarouselTransitionError() {
            var err = false
            var $carousel = $('#carousel-example-generic')
            $carousel.on('slid.bs.carousel', function() {
                $carousel.off('slid.bs.carousel')
                if (!err) {
                    alert('No error thrown for : testCarouselTransitionError')
                }
            })
            try {
                $carousel.carousel('next').carousel('prev')
            } catch (e) {
                err = true
                console.error(e.message)
            }
        }
        $(function() {
            // Test to show that the carousel doesn't slide when the current tab isn't visible
            $('#carousel-example-generic').on('slid.bs.carousel', function(event) {
                console.log('slid at ', event.timeStamp)
            })
            // testCarouselTransitionError()
        })
    </script>
</body>

</html>
